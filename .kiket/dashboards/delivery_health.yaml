model_version: "1.0"
dashboard:
  id: delivery-health
  name: Delivery Health
  description: Cycle time and throughput metrics refreshed by dbt.
  widgets:
    - id: cycle-time-trend
      type: timeseries
      title: Cycle Time (Days)
      query: fct_cycle_time
      query_config:
        model: fct_cycle_time
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
        order_by:
          - completed_on
      visualization:
        x: completed_on
        y: avg_cycle_days
        series: project_id
    - id: throughput-kpi
      type: kpi
      title: Issues Completed (Last 7 Days)
      query: fct_throughput
      query_config:
        model: fct_throughput
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
        order_by:
          - completed_on
      options:
        window: 7d
  alerts:
    - query: fct_cycle_time
      query_config:
        model: fct_cycle_time
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
      condition: avg_cycle_days > 5
      notify_roles:
        - manager
